# 発音記号インデックス — 要件定義

## 概要

ELSAが採用するアメリカ英語（General American）の全音素47個を一覧表示し、各発音記号の説明をアコーディオンで確認できるシンプルなWebアプリ。

## ターゲットユーザー

- ELSA Speakで英語の発音を学習中のユーザー
- 発音記号の読み方・発音の仕方を素早く確認したい人

## 技術スタック

- **フレームワーク**: Next.js（既存プロジェクト）
- **スタイリング**: CSS（Tailwind CSS利用可 ※プロジェクトに含まれていれば）
- **データ**: 静的JSON or TSファイルで発音記号データを管理
- **デプロイ**: 未定

---

## 画面構成

### 単一ページ構成（SPA的）

1ページ内に全機能を収める。ページ遷移なし。

---

## 機能要件

### F1: タブ切り替え（大分類）

- 4つのタブで発音記号を分類:
  1. **子音**（Consonants）— 24音
  2. **単母音**（Monophthongs）— 11音
  3. **二重母音**（Diphthongs）— 5音
  4. **R母音**（R-colored Vowels）— 7音
- タブ切り替えはSPA的に即座に表示切替
- 初期表示は「子音」タブ
- 選択中のタブは視覚的に区別

### F2: 発音記号カード一覧

- 各タブ内に発音記号をカード/ボタン形式で一覧表示
- 各カードに表示する情報:
  - 発音記号（例: `/p/`）
  - サブカテゴリ名（例: 「破裂音」「前舌母音」など）
- カードはタップ可能であることが視覚的にわかる

### F3: アコーディオン展開（発音説明）

- カードをタップすると同じ位置で説明が展開
- 展開時に表示する内容:
  - 発音記号
  - カテゴリ（有声/無声、調音点など）
  - 例語とELSA表記
  - 日本語近似音
  - **発音の仕方（数行程度のテキスト説明）** ※初期はダミーテキスト
- 再タップで閉じる
- 同時に複数展開可能（排他制御なし）

### F4: セクション見出し

- 各タブ内で中分類（破裂音・摩擦音・前舌母音など）ごとにセクション見出しを表示
- カードはセクション見出しの下にグルーピング

---

## 非機能要件

### デザイン

- **ダークモード専用**（ライトモード非対応）
- **モバイルファースト**（スマホでの閲覧を最優先）
- PCでも崩れないレスポンシブ対応
- タッチターゲットは最低44x44pt
- 発音記号は大きめのフォントで視認性確保

### パフォーマンス

- 全データを静的に保持（API呼び出しなし）
- タブ切り替え時にロード不要

### アクセシビリティ

- 基本的なセマンティックHTML
- タブのaria属性対応
- アコーディオンのaria-expanded対応

---

## データ構造

各発音記号が持つフィールド:

| フィールド        | 型      | 説明                                                      |
| ----------------- | ------- | --------------------------------------------------------- |
| symbol            | string  | 発音記号（例: "p"）                                       |
| displaySymbol     | string  | 表示用（例: "/p/"）                                       |
| category          | string  | 大分類（consonant / monophthong / diphthong / r-colored） |
| subcategory       | string  | 中分類（plosive / fricative / front-vowel など）          |
| voicing           | string? | 有声/無声（子音のみ）                                     |
| articulationPoint | string? | 調音点（子音のみ）                                        |
| openness          | string? | 開口度（母音のみ）                                        |
| movement          | string? | 動き（二重母音のみ）                                      |
| exampleWord       | string  | 例語                                                      |
| elsaNotation      | string  | ELSA表記                                                  |
| japaneseApprox    | string  | 日本語近似音                                              |
| description       | string  | 発音の仕方の説明（数行テキスト）※初期はダミー             |

---

## ワイヤーフレーム

### メイン画面（全体構成）

```
┌─────────────────────────────────┐
│  発音記号インデックス            │ ← ヘッダー（固定）
├─────────────────────────────────┤
│ [子音] [単母音] [二重母音] [R母音] │ ← タブバー（固定・横スクロール可）
├─────────────────────────────────┤
│                                 │
│  ▸ 破裂音（Plosives）          │ ← セクション見出し
│                                 │
│  ┌─────┐ ┌─────┐ ┌─────┐      │
│  │ /p/ │ │ /b/ │ │ /t/ │      │ ← カード一覧
│  │無声  │ │有声  │ │無声  │      │    （グリッド表示）
│  └─────┘ └─────┘ └─────┘      │
│  ┌─────┐ ┌─────┐ ┌─────┐      │
│  │ /d/ │ │ /k/ │ │ /g/ │      │
│  │有声  │ │無声  │ │有声  │      │
│  └─────┘ └─────┘ └─────┘      │
│                                 │
│  ▸ 摩擦音（Fricatives）        │ ← 次のセクション
│                                 │
│  ┌─────┐ ┌─────┐ ┌─────┐      │
│  │ /f/ │ │ /v/ │ │ /θ/ │      │
│  │無声  │ │有声  │ │無声  │      │
│  └─────┘ └─────┘ └─────┘      │
│  ...                            │ ← スクロールで続く
│                                 │
└─────────────────────────────────┘
```

### カード閉じ状態（通常）

```
┌───────────────┐
│     /p/       │ ← 発音記号（大きめフォント）
│   破裂音・無声 │ ← サブカテゴリ + 属性
└───────────────┘
  44x44pt 以上のタッチターゲット
```

### カード展開状態（アコーディオン）

```
┌───────────────────────────────┐
│     /p/                    ▾ │ ← 発音記号 + 開閉アイコン
│   破裂音・無声                │
├───────────────────────────────┤
│                               │
│  調音点: 両唇                  │
│  例語:   "pat" /pæt/         │
│  近似音: パ行                  │
│                               │
│  【発音の仕方】               │
│  上下の唇をしっかり閉じて      │
│  息をため、一気に開放して      │
│  破裂させるように発音します。   │
│  日本語の「パ」に近いですが、  │
│  英語ではより強い息の破裂を    │
│  伴います。                    │
│                               │
└───────────────────────────────┘
```

### 複数展開時のイメージ

```
┌─────────────────────────────────┐
│  発音記号インデックス            │
├─────────────────────────────────┤
│ [■子音] [単母音] [二重母音] [R母音] │
├─────────────────────────────────┤
│                                 │
│  ▸ 破裂音（Plosives）          │
│                                 │
│  ┌─────┐ ┌─────────────────┐   │
│  │ /p/ │ │ /b/           ▾ │   │ ← /b/ が展開中
│  │無声  │ ├─────────────────┤   │
│  └─────┘ │ 調音点: 両唇     │   │
│           │ 例語: "bat"     │   │
│  ┌─────┐ │ 近似音: バ行     │   │
│  │ /t/ │ │                 │   │
│  │無声  │ │ 【発音の仕方】  │   │
│  └─────┘ │ ...             │   │
│           └─────────────────┘   │
│  ┌─────┐ ┌─────┐ ┌─────┐      │
│  │ /d/ │ │ /k/ │ │ /g/ │      │
│  │有声  │ │無声  │ │有声  │      │
│  └─────┘ └─────┘ └─────┘      │
│                                 │
└─────────────────────────────────┘
```

**注**: 展開時、カードは同じグリッド位置で縦方向に広がり、
後続のカードは下にずれる（リフロー）。

### 単母音タブのイメージ

```
┌─────────────────────────────────┐
│  発音記号インデックス            │
├─────────────────────────────────┤
│ [子音] [■単母音] [二重母音] [R母音] │
├─────────────────────────────────┤
│                                 │
│  ▸ 前舌母音（Front Vowels）    │
│                                 │
│  ┌─────┐ ┌─────┐ ┌─────┐      │
│  │ /i/ │ │ /ɪ/ │ │ /ɛ/ │      │
│  │ 狭   │ │半狭  │ │半広  │      │
│  └─────┘ └─────┘ └─────┘      │
│  ┌─────┐                       │
│  │ /æ/ │                       │
│  │ 広   │                       │
│  └─────┘                       │
│                                 │
│  ▸ 中舌母音（Central Vowels）  │
│                                 │
│  ┌─────┐ ┌─────┐ ┌─────┐      │
│  │ /ə/ │ │ /ʌ/ │ │ /ɝ/ │      │
│  │弱・中央│ │半広  │ │R音化 │      │
│  └─────┘ └─────┘ └─────┘      │
│                                 │
│  ▸ 後舌母音（Back Vowels）     │
│  ...                            │
│                                 │
└─────────────────────────────────┘
```

### タブバー（モバイル横スクロール）

```
モバイル（幅 < 480px）:
┌─────────────────────────────────┐
│ [■子音] [単母音] [二重母音] →   │ ← 横スクロール可
└─────────────────────────────────┘
  ※ R母音はスクロールで表示

PC（幅 >= 768px）:
┌──────────────────────────────────────────────┐
│  [■子音]   [単母音]   [二重母音]   [R母音]    │ ← 全タブ表示
└──────────────────────────────────────────────┘
```

---

## ユーザーフロー

### 基本フロー: 発音記号を調べる

```
1. ページを開く（子音タブが初期表示）
2. 大分類タブをタップして目的のカテゴリに切り替え
3. セクション見出しを目安にスクロール
4. 目的の発音記号カードをタップ
5. アコーディオンが展開し、詳細説明を確認
6. 再タップまたは別のカードをタップして閉じる（※排他なし）
```

### フロー図

```
[ページ表示]
    |
    v
[子音タブ（初期表示）] ←──── [タブタップ] ←── [他のタブ]
    |                                            |
    v                                            v
[セクション見出しを                    [別カテゴリの
 目安にスクロール]                      カード一覧を表示]
    |
    v
[カードをタップ]
    |
    v
[アコーディオン展開] ──── [再タップ] ──→ [アコーディオン閉じ]
```

---

## 横断仕様

### エラーハンドリング

本アプリはAPIアクセスやユーザー入力がないため、エラーが発生するケースは限定的。

| エラーケース     | 対応                                               |
| ---------------- | -------------------------------------------------- |
| JSの読み込み失敗 | 静的HTMLとしてコンテンツ自体は表示される設計とする |
| ブラウザ非対応   | セマンティックHTMLにより最低限の情報は表示可能     |

### アクセシビリティ

| 要素             | 対応                                              |
| ---------------- | ------------------------------------------------- |
| タブ             | `role="tablist"` / `role="tab"` / `aria-selected` |
| タブパネル       | `role="tabpanel"` / `aria-labelledby`             |
| アコーディオン   | `aria-expanded` / `aria-controls`                 |
| タッチターゲット | 最低 44x44pt                                      |
| コントラスト比   | 4.5:1 以上（ダークモード背景に対して）            |
| セマンティクス   | `<h2>` でセクション見出し、`<button>` でカード    |

### ローディング・フィードバック

| シーン             | 対応                                           |
| ------------------ | ---------------------------------------------- |
| 初期表示           | 全データを静的に保持。ローディング表示不要     |
| タブ切り替え       | クライアントサイドで即時切り替え。スピナー不要 |
| アコーディオン開閉 | CSS transition で滑らかに展開/収縮             |

### フォームバリデーション

本アプリにフォーム入力はないため、該当なし。

---

## スコープ外

- テキスト検索機能
- FAQページ（ELSA表記ルール）
- ライトモード
- 音声再生機能
- ユーザー認証・保存機能
- 多言語対応（日本語のみ）
